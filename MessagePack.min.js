/*
 * TERMS OF USE - MessagePack.js
 * Open source under the MIT License.
 * Copyright 2015 James Schroer All rights reserved.
 */

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
var Pack=require("./lib/Pack.js"),Unpack=require("./lib/Unpack.js"),Utils=require("./lib/Utils.js"),ExtHandlers=require("./lib/ExtHandlers.js"),handlers={Unpack:{},Pack:{}},MessagePack={Utils:Utils,Pack:function(a){for(var e={},r=Object.keys(handlers.Pack),n=0;n<r.length;n++)e[r[n]]=handlers.Unpack[r[n]];if(MessagePack.UseDefaultHandlers)for(var s=Object.keys(ExtHandlers.Pack),n=0;n<s.length;n++)e[s[n]]=ExtHandlers.Pack[s[n]];return Pack(a,MessagePack.segmentSize,e)},Unpack:function(a){for(var e={},r=Object.keys(handlers.Unpack),n=0;n<r.length;n++)e[r[n]]=handlers.Unpack[r[n]];if(MessagePack.UseDefaultHandlers)for(var s=Object.keys(ExtHandlers.Unpack),n=0;n<s.length;n++)e[s[n]]=ExtHandlers.Unpack[s[n]];if(a instanceof ArrayBuffer)return Unpack(a,e);for(var t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],n=0;n<t.length;n++)if(a instanceof t[n])return Unpack(a.buffer,e);throw new Error("MessagePack.Unpack: Expecting data as ArrayBuffer")},segmentSize:65536,AddHandler:function(a,e){for(var r=Object.keys(a),n=0;r>n;n++)handlers.Pack[r[n]]=a[r[n]];r=Object.keys(e);for(var n=0;r>n;n++)handlers.Unpack[r[n]]=e[r[n]]},UseDefaultHandlers:!0};global.MessagePack=MessagePack;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./lib/ExtHandlers.js":2,"./lib/Pack.js":3,"./lib/Unpack.js":4,"./lib/Utils.js":5}],2:[function(require,module,exports){
var Utils=require("./Utils.js"),Handlers={};Handlers.Unpack={0:function(e){return void 0},1:function(e){var r=new DataView(e),n=r.getUint32(0),t=r.getUint32(4),a=4294967296*n+t;return new Date(a)},2:function(e){var r=new Uint8Array(e)[0],n=Utils.DecodeUTF8(new Uint8Array(e.slice(1))),t="";return 128&r&&(t+="g"),64&r&&(t+="i"),32&r&&(t+="m"),16&r&&(t+="y"),new RegExp(n.replace(/\0*$/,""),t)}},Handlers.Pack={0:{obj:void 0,handler:function(){var e=new ArrayBuffer(1);return e}},1:{obj:Date,handler:function(e){var r=new ArrayBuffer(8),n=new DataView(r),t=e.valueOf(),a=t/4294967296&4294967295,i=t-4294967296*a;return n.setUint32(0,a,!1),n.setUint32(4,i,!1),r}},2:{obj:RegExp,handler:function(e){for(var r=e.toString().match(/[gimuy]*$/)[0],n=e.source,t=0,a=0;a<r.length;a++){var i=r[a];"g"==i&&(t=128|t),"i"==i&&(t=64|t),"m"==i&&(t=32|t),"y"==i&&(t=16|t)}if(n=Utils.EncodeUTF8(n),void 0===n)return void 0;var u=new ArrayBuffer(n.byteLength+1),o=new Uint8Array(u);o[0]=t;var l=new Uint8Array(n);return o.set(l,1),u}}},module.exports=Handlers;
},{"./Utils.js":5}],3:[function(require,module,exports){
function Pack(e,r,n){function t(e,n){if(64>=n)for(var t=0;n>t;t++)o[v++]=e[t],v==r&&(l.push(o),o=new Uint8Array(r),v=0);else if(r-v>n)o.set(new Uint8Array(e.buffer.slice(0,n)),v),v+=n;else{var i=r-v;n-=i,o.set(e.buffer.slice(0,i),v),l.push(o),o=new Uint8Array(r),o.set(e.buffer.slice(n),0),v=n}}function i(e,r,n,i){u[0]=e,u[1]=r,t(u,2),t(new Uint8Array(n),i)}function f(e,r){if(255>=e&&0!==r[0])u[0]=r[0],u[1]=e,t(u,2);else if(65535>=e)u[0]=r[1],u[1]=e>>>8,u[2]=255&e,t(u,3);else if(4294967295>=e)u[0]=r[2],u[1]=e>>>24&255,u[2]=e>>>16&255,u[3]=e>>>8&255,u[4]=255&e,t(u,5);else if(4==r.length&&9007199254740991>=e){u[0]=r[3];var n=e/4294967296&4294967295,i=e-4294967296*n;u[1]=n>>>24&255,u[2]=n>>>16&255,u[3]=n>>>8&255,u[4]=255&n,u[5]=i>>>24&255,u[6]=i>>>16&255,u[7]=i>>>8&255,u[8]=255&i,t(u,9)}}function s(e){var r=e.byteLength;f(r,[196,197,198]),t(new Uint8Array(e),r)}function a(r){if(r===+r)if(r%1==0&&r>=-9007199254740991&&9007199254740991>=r)if(0>r)if(r>=-31)u[0]=~r+1|224,t(u,1);else if(r>=-128)u[0]=208,u[1]=r,t(u,2);else if(r>=-32768)u[0]=209,u[1]=r>>>8,u[2]=255&r,t(u,3);else if(r>=-2147483648)u[0]=210,u[1]=r>>>24&255,u[2]=r>>>16&255,u[3]=r>>>8&255,u[4]=255&r,t(u,5);else{u[0]=211;var l=r/4294967296-1&4294967295,o=r-4294967296*l;u[1]=l>>>24&255,u[2]=l>>>16&255,u[3]=l>>>8&255,u[4]=255&l,u[5]=o>>>24&255,u[6]=o>>>16&255,u[7]=o>>>8&255,u[8]=255&o,t(u,9)}else 128>r?(u[0]=r,t(u,1)):f(r,[204,205,206,207]);else u[0]=203,b.setFloat64(1,r,!1),t(u,9);else if(r===!!r)r?c[0]=195:c[0]=194,t(c,1);else if(null===r)c[0]=192,t(c,1);else if("string"==typeof r){var y=Utils.EncodeUTF8(r),v=new Uint8Array(y),A=v.byteLength;31>=A?(u[0]=160|31&A,t(u,1)):f(A,[217,218,219]),t(v,A)}else if(Array.isArray(r)){var A=r.length;15>=A?(u[0]=144+A,t(u,1)):f(A,[0,220,221]);for(var h=0;A>h;h++)a(e[h])}else if(r instanceof ArrayBuffer)s(r);else if(r instanceof Object&&Object.getPrototypeOf(r)==Object.prototype){var w=Object.keys(r),A=w.length;15>=A?(u[0]=128+A,t(u,1)):f(A,[0,222,223]);for(var h=0;A>h;h++)a(w[h]),a(e[w[h]])}else for(var U in n)if(r===n[U].obj||n[U].obj instanceof Object&&r instanceof n[U].obj){var y=n[U].handler(r),A=y.byteLength;1>=A?(u[0]=212,u[1]=U,A?u[2]=new Uint8Array(y)[0]:u[2]=0,t(u,3)):2==A?i(213,U,y,A):4==A?i(214,U,y,A):8==A?i(215,U,y,A):16==A?i(216,U,y,A):f(A,[199,200,201]);break}}var l=[],o=new Uint8Array(r),c=new Uint8Array(1),y=new ArrayBuffer(64),u=new Uint8Array(y),b=new DataView(y),v=0;if(a(e),r>v&&0==l.length)return o.buffer.slice(0,v);for(var A=v,h=0;h<l.length;h++)A+=l[h].byteLength;for(var w=new ArrayBuffer(A),h=0;h<l.length;h++)w.set(l[h],r*h);return w.set(o.slice(0,v),l.length*r),w}var Utils=require("./Utils.js");module.exports=Pack;
},{"./Utils.js":5}],4:[function(require,module,exports){
function Unpack(e,r){function t(){var e=n.getUint8(a++);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:var i=n.getUint8(a++);return n.buffer.slice(a,a+=i);case 197:var i=n.getUint16((a+=2)-2);return n.buffer.slice(a,a+=i);case 198:var i=n.getUint32((a+=4)-4);return n.buffer.slice(a,a+=i);case 199:var i=n.getUint8(a++),s=r[n.getUint8(a++)],c=n.buffer.slice(a,a+=i);return s?s(c):void 0;case 200:var i=n.getUint16((a+=2)-2),s=r[n.getUint8(a++)],c=n.buffer.slice(a,a+=i);return s?s(c):void 0;case 201:var i=n.getUint32((a+=4)-4),s=r[n.getUint8(a++)],c=n.buffer.slice(a,a+=i);return s?s(c):void 0;case 202:return n.getFloat32((a+=4)-4);case 203:return n.getFloat64((a+=8)-8);case 204:return n.getUint8(a++);case 205:return n.getUint16((a+=2)-2);case 206:return n.getUint32((a+=4)-4);case 207:var u=n.getUint32((a+=4)-4),f=n.getUint32((a+=4)-4);return console.warn("Uint64 intergers are not supported by Javascript, interger will be mangled to a float64"),4294967296*u+f;case 208:return n.getInt8(a++);case 209:return n.getInt16((a+=2)-2);case 210:return n.getInt32((a+=4)-4);case 211:var u=n.getInt32((a+=4)-4),o=n.getInt32((a+=4)-4);return console.warn("Uint64 intergers are not supported by Javascript, interger will be mangled to a float64"),2147483648*u+o;case 212:var s=r[n.getUint8(a++)],c=n.buffer.slice(a,++a);return s?s(c):void 0;case 213:var s=r[n.getUint8(a++)],c=n.buffer.slice(a,a+=2);return s?s(c):void 0;case 214:var s=r[n.getUint8(a++)],c=n.buffer.slice(a,a+=4);return s?s(c):void 0;case 215:var s=r[n.getUint8(a++)],c=n.buffer.slice(a,a+=8);return s?s(c):void 0;case 216:var s=r[n.getUint8(a++)],c=n.buffer.slice(a,a+=16);return s?s(c):void 0;case 217:var i=n.getUint8(a++);return decodeUTF8(new Uint8Array(n.buffer.slice(a,a+=i)));case 218:var i=n.getUint16((a+=2)-2);return decodeUTF8(new Uint8Array(n.buffer.slice(a,a+=i)));case 219:var i=n.getUint32((a+=4)-4);return decodeUTF8(new Uint8Array(n.buffer.slice(a,a+=i)));case 220:for(var i=n.getUint16((a+=2)-2),U=[],g=0;i>g;g++)U.push(t());return U;case 221:for(var i=n.getUint32((a+=4)-4),U=[],g=0;i>g;g++)U.push(t());return U;case 222:for(var i=n.getUint16((a+=2)-2),U={},g=0;i>g;g++){var v=t();if("string"!=typeof v&&"number"!=typeof v)throw new Error("MessagePack.Unpack: Invalid key type for object");U[v]=t()}return U;case 223:for(var i=n.getUint32((a+=4)-4),U={},g=0;i>g;g++){var v=t();if("string"!=typeof v&&"number"!=typeof v)throw new Error("MessagePack.Unpack: Invalid key type for object");U[v]=t()}return U;default:if(!(128&e))return e;if(128==(240&e)){for(var i=15&e,U={},g=0;i>g;g++)U[t()]=t();return U}if(144==(240&e)){for(var i=15&e,U=[],g=0;i>g;g++)U.push(t());return U}if(160==(224&e)){var i=31&e;return decodeUTF8(new Uint8Array(n.buffer.slice(a,a+=i)))}if(e>=224&&255>=e)return-(31&e)}throw new Error("MessagePack.Unpack: Malformed data stream")}var n=new DataView(e),a=0;return t()}var Utils=require("./Utils.js"),decodeUTF8=Utils.DecodeUTF8;module.exports=Unpack;
},{"./Utils.js":5}],5:[function(require,module,exports){
var Utils={DecodeUTF8:function(r){for(var e=[],i=0;i<r.byteLength;){for(var n=r[i++],o=0;n<<o&128;o++)if(6==o)return void 0;var t=n&255>>>o;o--;for(var f=0;o>f;f++){var n=r[i++];if(128!=(192&n))return void 0;t=(t<<6)+(63&n)}e.push(t)}var a=String.fromCharCode.apply(null,e);return a},EncodeUTF8:function(r){for(var e=r.length,i=new Uint8Array(4*e),n=0,o=0;e>o;o++){var t=r.charCodeAt(o);if(128>t)i[n++]=t;else if(2048>t)i[n++]=t>>6&31|192,i[n++]=63&t|128;else if(65536>t)i[n++]=t>>12|224,i[n++]=t>>6&63|128,i[n++]=63&t|128;else{if(!(2097152>t))return void 0;i[n++]=t>>18|240,i[n++]=t>>12&63|128,i[n++]=t>>6&63|128,i[n++]=63&t|128}}return i.buffer.slice(0,n)}};module.exports=Utils;
},{}]},{},[1])


//# sourceMappingURL=MesagePack.js.map